apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: store
  namespace: demo-app # Or your target namespace
spec:
  interval: 15m
  chart:
    spec:
      chart: ./helm/store-app # Assuming a local chart, adjust if it's from a HelmRepository
      sourceRef:
        kind: GitRepository
        name: aks-store-ops # Must match the name in app-source.yaml
        namespace: flux-system
  values:
    rabbitmq:
      image:
        repository: mcr.microsoft.com/mirror/docker/library/rabbitmq
        tag: "3.10-management-alpine"
    orderService:
      image:
        repository: ghcr.io/azure-samples/aks-store-demo/order-service
        tag: latest
    productService:
      image:
        repository: ghcr.io/azure-samples/aks-store-demo/product-service
        tag: latest
    storeFront:
      image:
        repository: ghcr.io/azure-samples/aks-store-demo/store-front
        tag: latest
